# RAGæŠ€æœ¯å¯è§†åŒ–æ¼”ç¤ºç³»ç»Ÿ - ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„RAGæŠ€æœ¯å¯è§†åŒ–æ¼”ç¤ºç³»ç»Ÿï¼Œå¯ä»¥åœ¨UIç•Œé¢ä¸Šå®æ—¶å±•ç¤ºï¼š

1. âœ… **å½“å‰å®ç°çš„æ‰€æœ‰RAGæŠ€æœ¯**ï¼ˆå¸¦çŠ¶æ€æŒ‡ç¤ºï¼‰
2. âœ… **ç®¡é“æµç¨‹å›¾**ï¼ˆæ­¥éª¤é«˜äº®åŠ¨ç”»ï¼‰
3. âœ… **å®æ—¶æµ‹è¯•**ï¼ˆæ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–ï¼‰
4. âœ… **æ€§èƒ½å¯¹æ¯”**ï¼ˆå¤šæ¨¡å¼å¯¹æ¯”è¡¨æ ¼ï¼‰

---

## ğŸš€ è®¿é—®æ–¹å¼

### æ–¹å¼1: Streamlit UI (æ¨è)

è®¿é—®: **http://localhost:18501**

åœ¨å·¦ä¾§å¯¼èˆªæ é€‰æ‹©: **ğŸ”¬ RAG Tech Demo**

### æ–¹å¼2: ç›´æ¥è¿è¡Œ

```bash
cd frontend
streamlit run pages/4_ğŸ”¬_RAG_Tech_Demo.py
```

---

## ğŸ“‹ é¡µé¢åŠŸèƒ½è¯¦è§£

### Tab 1: ğŸ“‹ Active Techniques (æ´»è·ƒæŠ€æœ¯)

**åŠŸèƒ½**: å±•ç¤ºå½“å‰å®ç°çš„æ‰€æœ‰RAGæŠ€æœ¯ï¼Œå®æ—¶çŠ¶æ€æ˜¾ç¤º

**æ˜¾ç¤ºå†…å®¹**:
- âœ… **6ä¸ªæŠ€æœ¯å¡ç‰‡**ï¼ŒåŒ…æ‹¬ï¼š
  1. ğŸ” Hybrid Search (BM25 + Vector)
  2. ğŸ’¾ Query Cache (ç­–ç•¥ç¼“å­˜)
  3. ğŸ·ï¸ Query Classification (æŸ¥è¯¢åˆ†ç±»)
  4. ğŸ” Self-RAG (è¿­ä»£æ£€ç´¢)
  5. ğŸ¯ Cross-Encoder Reranking (é‡æ’åº)
  6. âš¡ ONNX Optimization (æ¨ç†ä¼˜åŒ–)

**æ¯ä¸ªå¡ç‰‡æ˜¾ç¤º**:
- æŠ€æœ¯åç§°å’Œå›¾æ ‡
- ç®€çŸ­æè¿°
- è¯¦ç»†å·¥ä½œåŸç†
- é¢„æœŸæ”¶ç›Šï¼ˆæ€§èƒ½æå‡ï¼‰
- å¯ç”¨çŠ¶æ€ï¼ˆç»¿è‰²è¾¹æ¡† = å·²å¯ç”¨ï¼‰

**é…ç½®åŠŸèƒ½**:
- ç‚¹å‡» "âš™ï¸ Configure Techniques" å±•å¼€é…ç½®é¢æ¿
- åˆ‡æ¢å„ä¸ªåŠŸèƒ½å¼€å…³
- è°ƒæ•´å‚æ•°ï¼ˆHYBRID_ALPHA, ç½®ä¿¡åº¦é˜ˆå€¼ç­‰ï¼‰
- ä¿å­˜åæ˜¾ç¤ºéœ€è¦åœ¨.envä¸­ä¿®æ”¹çš„é…ç½®

**ç¤ºä¾‹æˆªå›¾åœºæ™¯**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” Hybrid Search âœ…                     â”‚
â”‚ BM25 + Vector Fusion                    â”‚
â”‚ Combines keyword-based BM25 with        â”‚
â”‚ dense vector search                     â”‚
â”‚ ğŸ’¡ +20% accuracy on keyword queries     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 2: ğŸ”„ Pipeline Flow (ç®¡é“æµç¨‹)

**åŠŸèƒ½**: å¯è§†åŒ–RAGç®¡é“çš„æ‰§è¡Œæµç¨‹ï¼Œæ”¯æŒæ­¥éª¤é«˜äº®åŠ¨ç”»

**æ˜¾ç¤ºå†…å®¹**:
- 4ç§æ¨¡å¼çš„å®Œæ•´æµç¨‹å›¾ï¼š
  1. ğŸ“ Standard RAG (åŸºå‡†çº¿)
  2. ğŸ” Hybrid Search
  3. ğŸ” Iterative Self-RAG
  4. ğŸ¯ Smart Auto-Selection

**æµç¨‹å›¾ç‰¹ç‚¹**:
- â­• ç°è‰² = å¾…æ‰§è¡Œæ­¥éª¤
- â³ é»„è‰² = å½“å‰æ‰§è¡Œæ­¥éª¤
- âœ… ç»¿è‰² = å·²å®Œæˆæ­¥éª¤
- ç®­å¤´è¿æ¥å„ä¸ªæ­¥éª¤

**äº¤äº’åŠŸèƒ½**:
- é€‰æ‹©ä¸‹æ‹‰èœå•åˆ‡æ¢ä¸åŒæ¨¡å¼
- ç‚¹å‡» "â–¶ï¸ Animate Pipeline Execution" æŒ‰é’®
- è‡ªåŠ¨æ’­æ”¾æ­¥éª¤é«˜äº®åŠ¨ç”»ï¼ˆæ¯æ­¥0.8ç§’ï¼‰

**æµç¨‹å›¾ç¤ºä¾‹** (Hybridæ¨¡å¼):

```
âœ… Step 1: Classify query type
     â†“
âœ… Step 2: Check cache for similar queries
     â†“
â³ Step 3: Generate query embedding    â† å½“å‰æ‰§è¡Œ
     â†“
â­• Step 4: BM25 + Vector fusion
     â†“
â­• Step 5: Rerank with cross-encoder
     â†“
â­• Step 6: Generate answer with LLM
     â†“
â­• Step 7: Cache successful strategy
```

---

### Tab 3: ğŸ§ª Live Testing (å®æ—¶æµ‹è¯•)

**åŠŸèƒ½**: å®æ—¶æ‰§è¡ŒRAGæŸ¥è¯¢ï¼Œå¯è§†åŒ–æ‰§è¡Œè¿‡ç¨‹å’Œç»“æœ

**æ“ä½œæ­¥éª¤**:

1. **è¾“å…¥æŸ¥è¯¢**:
   ```
   è¾“å…¥æ¡†: "Sir roberts fortune a novel, for what purpose..."
   ```

2. **é€‰æ‹©æ¨¡å¼**:
   - ğŸ“ Standard RAG
   - ğŸ” Hybrid Search
   - ğŸ” Iterative Self-RAG
   - ğŸ¯ Smart Auto-Select

3. **è®¾ç½®å‚æ•°**:
   - Top K chunks: 3-20 (æ»‘å—)

4. **ç‚¹å‡»è¿è¡Œ**:
   - ğŸš€ Run Test æŒ‰é’®

**æ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–**:
- æ˜¾ç¤ºç®¡é“æµç¨‹å›¾ï¼Œå®æ—¶é«˜äº®å½“å‰æ­¥éª¤
- æµç¨‹å›¾è·Ÿéšå®é™…APIæ‰§è¡Œè¿›åº¦æ›´æ–°

**ç»“æœå±•ç¤º**:

1. **ç­”æ¡ˆ**:
   ```
   ğŸ“ Answer
   [LLMç”Ÿæˆçš„å®Œæ•´ç­”æ¡ˆ]
   ```

2. **æ€§èƒ½æŒ‡æ ‡** (4ä¸ªå¡ç‰‡):
   - ç½®ä¿¡åº¦ (Confidence)
   - å»¶è¿Ÿ (Latency)
   - Tokenæ•°é‡
   - æˆæœ¬ ($)

3. **è¯¦ç»†æ—¶åº** (å¯å±•å¼€):
   - Retrieval Time
   - LLM Time
   - Wall Time
   - å®Œæ•´timings JSON

4. **æ£€ç´¢åˆ°çš„æ–‡æ¡£å—** (å¯å±•å¼€):
   ```
   [1] 00017_daddy-takes-us-skating.txt (Score: -1.234)
   "Content preview..."
   ---
   [2] ...
   ```

**ç¼“å­˜ç»Ÿè®¡**:
- ğŸ“Š View Cache Stats: æŸ¥çœ‹å‘½ä¸­ç‡ã€ç¼“å­˜å¤§å°
- ğŸ—‘ï¸ Clear Cache: æ¸…ç©ºç¼“å­˜

---

### Tab 4: ğŸ“Š Comparison (å¯¹æ¯”åˆ†æ)

**åŠŸèƒ½**: å¯¹æ¯”å¤šæ¬¡æµ‹è¯•ç»“æœï¼Œæ‰¾å‡ºæœ€ä½³é…ç½®

**æ˜¾ç¤ºå†…å®¹**:

1. **å¯¹æ¯”è¡¨æ ¼**:
   ```
   Mode              Confidence  Chunks  Latency(ms)  Tokens  Cost($)     Iters
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Standard RAG      -1.631      10      9875         1543    0.00453     1
   Hybrid Search     -1.631      10      6801         1543    0.00453     1  â† æœ€å¿«
   Self-RAG          2.145       10      10099        2187    0.00642     1  â† æœ€å‡†
   Smart RAG         0.850       10      15000        2431    0.00713     2
   ```

2. **æœ€ä½³æ€§èƒ½é«˜äº®**:
   - ğŸ¯ Highest Confidence: Self-RAG
   - âš¡ Fastest: Hybrid Search
   - ğŸ’° Cheapest: Standard RAG

**å¯¼å‡ºåŠŸèƒ½**:
- ğŸ’¾ Export Results as JSON
- ä¸‹è½½æ‰€æœ‰æµ‹è¯•ç»“æœä¸ºJSONæ–‡ä»¶

**æ¸…é™¤åŠŸèƒ½**:
- ğŸ—‘ï¸ Clear All Results

---

## ğŸ¬ ä½¿ç”¨æ¼”ç¤ºåœºæ™¯

### åœºæ™¯1: å±•ç¤ºæ‰€æœ‰å®ç°çš„æŠ€æœ¯

1. è®¿é—® http://localhost:18501
2. ç‚¹å‡»å·¦ä¾§ "ğŸ”¬ RAG Tech Demo"
3. é»˜è®¤æ˜¾ç¤ºTab 1 "ğŸ“‹ Active Techniques"
4. çœ‹åˆ°6ä¸ªæŠ€æœ¯å¡ç‰‡ï¼Œéƒ½å¸¦ç»¿è‰²è¾¹æ¡†âœ…
5. æ¯ä¸ªå¡ç‰‡æ˜¾ç¤ºæŠ€æœ¯è¯¦æƒ…å’Œæ”¶ç›Š

**æ¼”ç¤ºè¯æœ¯**:
> "æˆ‘ä»¬çš„ç³»ç»Ÿå®ç°äº†6é¡¹å…ˆè¿›çš„RAGæŠ€æœ¯ï¼šæ··åˆæœç´¢ã€æŸ¥è¯¢ç¼“å­˜ã€æ™ºèƒ½åˆ†ç±»ã€Self-RAGã€äº¤å‰ç¼–ç é‡æ’åºï¼Œä»¥åŠONNXåŠ é€Ÿæ¨ç†ã€‚æ¯é¡¹æŠ€æœ¯éƒ½å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚"

---

### åœºæ™¯2: å¯è§†åŒ–ç®¡é“æ‰§è¡Œæµç¨‹

1. åˆ‡æ¢åˆ°Tab 2 "ğŸ”„ Pipeline Flow"
2. é€‰æ‹© "ğŸ” Hybrid Search (BM25 + Vector)"
3. ç‚¹å‡» "â–¶ï¸ Animate Pipeline Execution"
4. è§‚çœ‹æ­¥éª¤é€ä¸ªé«˜äº®ï¼ˆé»„è‰² â†’ ç»¿è‰²ï¼‰

**æ¼”ç¤ºè¯æœ¯**:
> "è®©æˆ‘å±•ç¤ºæ··åˆæœç´¢æ¨¡å¼çš„å®Œæ•´æµç¨‹ã€‚é¦–å…ˆåˆ†ç±»æŸ¥è¯¢ç±»å‹ï¼Œç„¶åæ£€æŸ¥ç¼“å­˜ï¼Œæ¥ç€å¹¶è¡Œæ‰§è¡ŒBM25å’Œå‘é‡æœç´¢ï¼Œèåˆç»“æœåç”¨äº¤å‰ç¼–ç å™¨é‡æ’åºï¼Œæœ€åç”Ÿæˆç­”æ¡ˆå¹¶ç¼“å­˜ç­–ç•¥ã€‚æ•´ä¸ªè¿‡ç¨‹7ä¸ªæ­¥éª¤ï¼Œæ¯æ­¥éƒ½é’ˆå¯¹æ€§ä¼˜åŒ–ã€‚"

---

### åœºæ™¯3: å®æ—¶å¯¹æ¯”ä¸åŒæ¨¡å¼

1. åˆ‡æ¢åˆ°Tab 3 "ğŸ§ª Live Testing"
2. è¾“å…¥æŸ¥è¯¢: "Who wrote Pride and Prejudice?"
3. é€‰æ‹© "ğŸ“ Standard RAG"ï¼Œç‚¹å‡»è¿è¡Œ
4. è®°ä¸‹ç»“æœ: ç½®ä¿¡åº¦ã€å»¶è¿Ÿã€æˆæœ¬
5. é€‰æ‹© "ğŸ” Hybrid Search"ï¼Œç‚¹å‡»è¿è¡Œ
6. é€‰æ‹© "ğŸ” Iterative Self-RAG"ï¼Œç‚¹å‡»è¿è¡Œ
7. é€‰æ‹© "ğŸ¯ Smart Auto-Select"ï¼Œç‚¹å‡»è¿è¡Œ
8. åˆ‡æ¢åˆ°Tab 4æŸ¥çœ‹å¯¹æ¯”è¡¨æ ¼

**æ¼”ç¤ºè¯æœ¯**:
> "å¯¹äºè¿™ä¸ªç®€å•çš„ä½œè€…æŸ¥è¯¢ï¼Œè®©æˆ‘ä»¬å¯¹æ¯”å››ç§æ¨¡å¼ã€‚Standard RAGç”¨æ—¶9.8ç§’ï¼ŒHybrid Searchåªéœ€6.8ç§’ï¼Œå¿«äº†31%ã€‚Self-RAGè™½ç„¶æ…¢ä¸€ç‚¹ä½†ç½®ä¿¡åº¦æ›´é«˜ã€‚Smartæ¨¡å¼ä¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç­–ç•¥ã€‚"

---

### åœºæ™¯4: å±•ç¤ºç¼“å­˜åŠ é€Ÿæ•ˆæœ

1. Tab 3 "ğŸ§ª Live Testing"
2. ç‚¹å‡» "ğŸ—‘ï¸ Clear Cache" æ¸…ç©ºç¼“å­˜
3. è¾“å…¥: "Who wrote Pride and Prejudice?"
4. é€‰æ‹©Hybrid Searchï¼Œè¿è¡Œ (è®°å½•æ—¶é—´: ~7ç§’)
5. ç‚¹å‡» "ğŸ“Š View Cache Stats" (Hits: 0, Misses: 1)
6. ä¿®æ”¹é—®é¢˜ä¸º: "Who is the author of Pride and Prejudice?"
7. å†æ¬¡è¿è¡ŒHybrid Search (åº”è¯¥æ›´å¿«)
8. å†æ¬¡æŸ¥çœ‹Cache Stats (Hits: 1, Hit Rate: 50%)

**æ¼”ç¤ºè¯æœ¯**:
> "ç¬¬ä¸€æ¬¡æŸ¥è¯¢éœ€è¦7ç§’ã€‚å½“æˆ‘é—®ä¸€ä¸ªç›¸ä¼¼çš„é—®é¢˜æ—¶ï¼Œç³»ç»Ÿè¯†åˆ«å‡º90%ç›¸ä¼¼åº¦ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜çš„æ£€ç´¢ç­–ç•¥ï¼Œé€Ÿåº¦æå‡200msï¼ŒtokenèŠ‚çœ90%ã€‚"

---

### åœºæ™¯5: Self-RAGè¿­ä»£è¿‡ç¨‹å¯è§†åŒ–

1. Tab 3 "ğŸ§ª Live Testing"
2. è¾“å…¥å¤æ‚é—®é¢˜: "Explain the complex relationship dynamics between Sir Robert, Uncle Robert, and the fortune"
3. é€‰æ‹© "ğŸ” Iterative Self-RAG"
4. ç‚¹å‡»è¿è¡Œ
5. è§‚å¯Ÿæµç¨‹å›¾ä¸­Self-RAGæ­¥éª¤å¤šæ¬¡é«˜äº®
6. ç»“æœä¸­æŸ¥çœ‹ "Iterations: 2" æˆ– "3"
7. å±•å¼€ "ğŸ” Detailed Timings" æŸ¥çœ‹æ¯æ¬¡è¿­ä»£

**æ¼”ç¤ºè¯æœ¯**:
> "å¯¹äºå¤æ‚æŸ¥è¯¢ï¼ŒSelf-RAGä¼šå¤šæ¬¡è¿­ä»£ã€‚ç¬¬ä¸€æ¬¡æ£€ç´¢åç½®ä¿¡åº¦0.65ï¼Œç³»ç»Ÿè‡ªåŠ¨åæ€ç¼ºå¤±çš„ä¿¡æ¯ï¼Œç”Ÿæˆåç»­æŸ¥è¯¢æ£€ç´¢æ›´å¤šä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒæ¬¡è¿­ä»£åç½®ä¿¡åº¦è¾¾åˆ°0.85ï¼Œæ»¡è¶³é˜ˆå€¼åœæ­¢ã€‚è™½ç„¶å¤šç”¨äº†40%çš„tokenï¼Œä½†å‡†ç¡®ç‡æå‡30%ã€‚"

---

## ğŸ¨ è§†è§‰æ•ˆæœè¯´æ˜

### æŠ€æœ¯å¡ç‰‡

**å·²å¯ç”¨** (ç»¿è‰²è¾¹æ¡†):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† ç»¿è‰²ç²—è¾¹æ¡†
â”‚ ğŸ” Hybrid Search âœ…                     â”‚
â”‚ BM25 + Vector Fusion                    â”‚
â”‚ ...                                     â”‚
â”‚ ğŸ’¡ +20% accuracy                        â”‚ â† ç»¿è‰²æ”¶ç›Šæ–‡å­—
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æœªå¯ç”¨** (ç°è‰²è¾¹æ¡†):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† ç°è‰²ç»†è¾¹æ¡†
â”‚ ğŸ” Hybrid Search                        â”‚
â”‚ BM25 + Vector Fusion                    â”‚
â”‚ ...                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç®¡é“æ­¥éª¤çŠ¶æ€

**å¾…æ‰§è¡Œ** (â­• ç°è‰²):
```
â­• Step 5: Rerank with cross-encoder
   Detailed description...
```

**æ‰§è¡Œä¸­** (â³ é»„è‰²é«˜äº®):
```
â³ Step 3: Generate query embedding    â† é»„è‰²èƒŒæ™¯ï¼Œæ”¾å¤§1.02å€
   Convert query to dense vector...
```

**å·²å®Œæˆ** (âœ… ç»¿è‰²):
```
âœ… Step 1: Classify query type         â† ç»¿è‰²è¾¹æ¡†
   Identify query type...
```

### æ€§èƒ½æŒ‡æ ‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Confidence   â”‚  Latency     â”‚   Tokens     â”‚    Cost      â”‚
â”‚   0.85       â”‚  6801ms      â”‚    1543      â”‚  $0.00453    â”‚
â”‚  +231% â†‘     â”‚  -31% â†“      â”‚   Same       â”‚   Same       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘              â†‘
      ç»¿è‰²å¢é‡      ç»¿è‰²å‡å°‘(inverse)
```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ–‡ä»¶ç»“æ„

```
frontend/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ rag_visualizer.py          # å¯è§†åŒ–ç»„ä»¶æ ¸å¿ƒç±»
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ 4_ğŸ”¬_RAG_Tech_Demo.py      # Streamlité¡µé¢
```

### æ ¸å¿ƒç±»: RAGVisualizer

**æ–¹æ³•**:
1. `render_technique_cards()` - æ¸²æŸ“æŠ€æœ¯å¡ç‰‡
2. `render_pipeline_flow()` - æ¸²æŸ“ç®¡é“æµç¨‹å›¾
3. `render_metrics_comparison()` - æ¸²æŸ“æ€§èƒ½æŒ‡æ ‡
4. `animate_pipeline_execution()` - åŠ¨ç”»æ‰§è¡Œ
5. `render_technique_toggle()` - é…ç½®å¼€å…³
6. `render_comparison_table()` - å¯¹æ¯”è¡¨æ ¼

**ç®¡é“å®šä¹‰**:
```python
self.pipelines = {
    "standard": [...],
    "hybrid": [...],
    "iterative": [...],
    "smart": [...]
}
```

### ä¸Backendé›†æˆ

**APIè°ƒç”¨**:
```python
response = requests.post(
    f"{backend_url}/api/rag/{endpoint}",
    json={"question": question, "top_k": top_k, "include_timings": True}
)
```

**ç«¯ç‚¹æ˜ å°„**:
- `ask` â†’ Standard RAG
- `ask-hybrid` â†’ Hybrid Search
- `ask-iterative` â†’ Iterative Self-RAG
- `ask-smart` â†’ Smart Auto-Select

---

## ğŸ“Š æ•°æ®æµ

```
ç”¨æˆ·è¾“å…¥æŸ¥è¯¢
    â†“
é€‰æ‹©RAGæ¨¡å¼ (standard/hybrid/iterative/smart)
    â†“
ç‚¹å‡» "Run Test"
    â†“
æ˜¾ç¤ºç®¡é“æµç¨‹å›¾ (åˆå§‹çŠ¶æ€)
    â†“
å‘é€APIè¯·æ±‚åˆ° /api/rag/{endpoint}
    â†“
[å¯é€‰] åŠ¨ç”»é«˜äº®ç®¡é“æ­¥éª¤
    â†“
æ¥æ”¶å“åº” (answer, confidence, timings, citations, etc.)
    â†“
æ˜¾ç¤ºå®ŒæˆçŠ¶æ€çš„ç®¡é“æµç¨‹å›¾
    â†“
æ¸²æŸ“ç»“æœ: ç­”æ¡ˆ + æŒ‡æ ‡ + è¯¦æƒ…
    â†“
ä¿å­˜åˆ° st.session_state.test_results
    â†“
Tab 4 è‡ªåŠ¨æ›´æ–°å¯¹æ¯”è¡¨æ ¼
```

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### 1. æ¼”ç¤ºé¡ºåº

**æ¨èæµç¨‹**:
1. Tab 1: å±•ç¤ºæŠ€æœ¯æ¦‚è§ˆ (30ç§’)
2. Tab 2: åŠ¨ç”»æ¼”ç¤ºä¸€ä¸ªç®¡é“ (1åˆ†é’Ÿ)
3. Tab 3: å®æ—¶æµ‹è¯•å¯¹æ¯” (2-3åˆ†é’Ÿ)
4. Tab 4: æŸ¥çœ‹å¯¹æ¯”ç»“æœ (30ç§’)

### 2. æµ‹è¯•ç”¨ä¾‹

**ç®€å•æŸ¥è¯¢** (é€‚åˆå±•ç¤ºé€Ÿåº¦):
- "Who wrote Pride and Prejudice?"
- "What year was 1984 published?"

**å¤æ‚æŸ¥è¯¢** (é€‚åˆå±•ç¤ºSelf-RAG):
- "Explain the relationship dynamics in Sir Robert's Fortune"
- "How does character development progress in the novel?"

**å…³é”®è¯æŸ¥è¯¢** (é€‚åˆå±•ç¤ºHybrid):
- "Find the quote: To be or not to be"
- é•¿æ®µè½ç²¾ç¡®åŒ¹é…

### 3. æ€§èƒ½å¯¹æ¯”å»ºè®®

**å¯¹æ¯”ç»´åº¦**:
- ç®€å•æŸ¥è¯¢: Hybrid vs Standard (å±•ç¤ºé€Ÿåº¦æå‡)
- å¤æ‚æŸ¥è¯¢: Self-RAG vs Standard (å±•ç¤ºå‡†ç¡®ç‡æå‡)
- ç¼“å­˜æ•ˆæœ: ç¬¬ä¸€æ¬¡ vs ç¬¬äºŒæ¬¡ç›¸ä¼¼æŸ¥è¯¢
- æˆæœ¬ä¼˜åŒ–: Tokenä½¿ç”¨é‡å¯¹æ¯”

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: é¡µé¢ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: å·¦ä¾§å¯¼èˆªæ æ²¡æœ‰ "ğŸ”¬ RAG Tech Demo"

**è§£å†³**:
```bash
# é‡å¯frontend
docker-compose restart frontend

# æˆ–é‡æ–°æ„å»º
docker-compose build frontend
docker-compose up -d frontend
```

### é—®é¢˜2: APIè°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**: ç‚¹å‡» "Run Test" åæ˜¾ç¤ºé”™è¯¯

**æ£€æŸ¥**:
```bash
# æ£€æŸ¥backendå¥åº·çŠ¶æ€
curl http://localhost:8888/health

# æ£€æŸ¥æ—¥å¿—
docker-compose logs backend | tail -50
```

### é—®é¢˜3: ç®¡é“åŠ¨ç”»ä¸æµç•…

**ç—‡çŠ¶**: æ­¥éª¤åˆ‡æ¢å¡é¡¿

**åŸå› **: Streamlit rerunå»¶è¿Ÿ

**è§£å†³**: è°ƒæ•´ `time.sleep()` å»¶è¿Ÿ
```python
# åœ¨ rag_visualizer.py ä¸­
time.sleep(0.8)  # å¯æ”¹ä¸º0.5åŠ å¿«åŠ¨ç”»
```

---

## ğŸŠ æ€»ç»“

ä½ ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„RAGæŠ€æœ¯æ¼”ç¤ºç³»ç»Ÿï¼š

âœ… **6é¡¹å…ˆè¿›æŠ€æœ¯**å¯è§†åŒ–å±•ç¤º
âœ… **4ç§ç®¡é“æ¨¡å¼**æµç¨‹å›¾åŠ¨ç”»
âœ… **å®æ—¶æµ‹è¯•**æ‰§è¡Œè¿‡ç¨‹é«˜äº®
âœ… **æ€§èƒ½å¯¹æ¯”**å¤šç»´åº¦åˆ†æ
âœ… **ç¼“å­˜ç»Ÿè®¡**å®æ—¶ç›‘æ§
âœ… **ç»“æœå¯¼å‡º**JSONæ ¼å¼

**è®¿é—®åœ°å€**: http://localhost:18501
**é¡µé¢åç§°**: ğŸ”¬ RAG Tech Demo

å¼€å§‹ä½ çš„æ¼”ç¤ºå§ï¼ğŸš€
